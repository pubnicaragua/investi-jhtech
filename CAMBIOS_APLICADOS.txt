===============================================================================
CAMBIOS APLICADOS - OPTIMIZACI√ìN WEB Y CORRECCIONES CR√çTICAS
===============================================================================

‚úÖ PROBLEMAS RESUELTOS:

1. ERROR 406 EN SUPABASE
   - Archivo: src/screens/SignUpScreen.tsx
   - Cambio: .single() ‚Üí .maybeSingle() en queries de users
   - Resultado: Ya no hay errores 406 al verificar emails

2. NAVEGACI√ìN POST-REGISTRO
   - Archivo: src/screens/SignUpScreen.tsx
   - Cambio: Navegaci√≥n expl√≠cita a Onboarding despu√©s de signup
   - Resultado: Usuario llega correctamente al onboarding

3. PANTALLA DE SOPORTE NO ABR√çA
   - Archivo: src/navigation/index.tsx
   - Cambio: Agregado SupportTicket screen al stack principal
   - Resultado: Soporte ahora es accesible desde Settings

4. COMPARTIR POST ROTO
   - Archivo: src/screens/PostDetailScreen.tsx
   - Cambio: Navega a SharePost screen en lugar de ChatList
   - Resultado: Usuario puede seleccionar destinatarios correctamente

5. VALIDACI√ìN DE EMAIL
   - Archivo: src/screens/SignUpScreen.tsx
   - Cambio: Validaci√≥n de formato con regex y mensaje claro
   - Resultado: Usuario recibe feedback inmediato si email es inv√°lido

6. MARKETINFO API
   - Archivo: src/services/searchApiService.ts
   - Cambio: Yahoo Finance ‚Üí Alpha Vantage completamente
   - Resultado: MarketInfo funciona con EXPO_PUBLIC_ALPHA_VANTAGE_API_KEY

7. IRI CHAT VOZ EN WEB
   - Archivo: src/screens/IRIChatScreen.tsx
   - Cambios:
     * Micr√≥fono deshabilitado en web (muestra alerta)
     * ElevenLabs deshabilitado en web
     * Log "No hay usuario" solo en desarrollo
   - Resultado: No m√°s errores de voz en web

8. PERSISTENCIA DE SESI√ìN
   - Archivo: src/supabase.ts
   - Cambios:
     * autoRefreshToken: true
     * persistSession: true
     * storageKey configurado
     * Headers Accept/Content-Type agregados
   - Resultado: Sesi√≥n se mantiene entre recargas

9. LOGS EN PRODUCCI√ìN
   - Archivos: src/supabase.ts, src/screens/IRIChatScreen.tsx
   - Cambio: Logs solo si NODE_ENV !== 'production'
   - Resultado: Logs de Supabase ocultos en producci√≥n

10. SIGNOUT EN SIDEBAR
    - Archivo: src/components/Sidebar.tsx
    - Cambios:
      * Limpia todos los tokens (access_token, auth_token, etc.)
      * Navega a Welcome screen
      * Cierra sidebar primero
    - Resultado: SignOut funciona correctamente

===============================================================================
‚ö†Ô∏è PROBLEMAS PENDIENTES (REQUIEREN M√ÅS TRABAJO):
===============================================================================

1. LIKE/RECOMMEND SYNC EN RELOAD
   - Problema: Al recargar, el contador de likes baja aunque el bot√≥n muestra "liked"
   - Causa: Posible desincronizaci√≥n entre post_likes y posts.likes_count
   - Soluci√≥n sugerida: Revisar triggers de Supabase o recalcular contador al cargar

2. CREATEPOST LENTO
   - Problema: Tarda mucho en cargar
   - Causa: Posible carga de im√°genes sin optimizaci√≥n
   - Soluci√≥n sugerida: Lazy loading, compresi√≥n de im√°genes, skeleton loaders

3. PROMOTIONS NO CARGA (+10 SEGUNDOS)
   - Problema: Pantalla no carga o tarda demasiado
   - Causa: Query de Supabase posiblemente sin √≠ndices o muy compleja
   - Soluci√≥n sugerida: Agregar √≠ndices en BD, limitar resultados, paginaci√≥n

4. NAVBAR DESAPARECE A VECES
   - Problema: Bottom navigation bar se oculta aleatoriamente
   - Causa: Posible conflicto con KeyboardAvoidingView o estado de navegaci√≥n
   - Soluci√≥n sugerida: Revisar l√≥gica de visibilidad del navbar

===============================================================================
üìã CHECKLIST PARA DESPLEGAR:
===============================================================================

[‚úÖ] Errores 406 resueltos
[‚úÖ] Navegaci√≥n post-registro funciona
[‚úÖ] Soporte accesible
[‚úÖ] Compartir post funciona
[‚úÖ] Validaci√≥n de email
[‚úÖ] MarketInfo con Alpha Vantage
[‚úÖ] IRI Chat sin errores en web
[‚úÖ] Persistencia de sesi√≥n configurada
[‚úÖ] Logs ocultos en producci√≥n
[‚úÖ] SignOut funciona

[‚ö†Ô∏è] Like/recommend sync (pendiente)
[‚ö†Ô∏è] CreatePost optimizaci√≥n (pendiente)
[‚ö†Ô∏è] Promotions optimizaci√≥n (pendiente)
[‚ö†Ô∏è] Navbar estabilidad (pendiente)

===============================================================================
üöÄ COMANDOS PARA DESPLEGAR:
===============================================================================

# 1. Commitear cambios
git add .
git commit -m "fix: Multiple critical fixes - 406 errors, navigation, session persistence, web compatibility"
git push origin main

# 2. Variables de entorno en Netlify:
EXPO_PUBLIC_SUPABASE_URL=https://paoliakwfoczcallnecf.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=tu_key
EXPO_PUBLIC_GROK_API_KEY=tu_key
EXPO_PUBLIC_ALPHA_VANTAGE_API_KEY=RM2VEHDWC96VBAA3
NODE_ENV=production

# 3. Build command en Netlify:
npx expo export:web

# 4. Publish directory:
dist

===============================================================================
üìä ESTADO ACTUAL:
===============================================================================

FUNCIONAL:
‚úÖ Login/Registro
‚úÖ OAuth (Google, LinkedIn, Facebook)
‚úÖ SignOut
‚úÖ MarketInfo
‚úÖ IRI Chat (sin voz en web)
‚úÖ Navegaci√≥n general
‚úÖ Soporte
‚úÖ Compartir posts
‚úÖ Persistencia de sesi√≥n

OPTIMIZABLE:
‚ö†Ô∏è CreatePost (lento)
‚ö†Ô∏è Promotions (muy lento)
‚ö†Ô∏è Like sync (desincronizaci√≥n)
‚ö†Ô∏è Navbar (desaparece a veces)

===============================================================================
